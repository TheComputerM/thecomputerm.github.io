---
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";
import type { GetStaticPaths, Page } from "astro";
import ProjectCard from "@/components/ProjectCard.astro";
import { ContentContainer, GridBackground } from "@/components/ui/content";
import { AstroPagination } from "@/components/ui/paginate";
import BaseLayout from "@/layouts/Base.astro";

export const getStaticPaths = (async ({ paginate }) => {
	const projects = await getCollection("projects");

	return paginate(projects, { pageSize: 3 });
}) satisfies GetStaticPaths;

export interface Props {
	page: Page<CollectionEntry<"projects">>;
}

const { page } = Astro.props;
---

<BaseLayout title="Projects - TheComputerM | Mudit Somani" description="">
  <GridBackground>
    <ContentContainer>
      <h1 class="mb-2">Projects</h1>
      <p class="text-muted-foreground">
        Some of my most cherished and meticulously developed projects.
      </p>
      <hr />
      <AstroPagination page={page} />
      {page.data.map((project) => <ProjectCard project={project} />)}
      <br />
      <AstroPagination page={page} />
      <hr />
      See more of my work and other open-source contributions over on my
      <a href="https://github.com/thecomputerm" target="_blank">GitHub</a>.
    </ContentContainer>
  </GridBackground>
</BaseLayout>
